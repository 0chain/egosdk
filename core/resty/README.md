<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# resty

```go
import "github.com/0chain/gosdk/core/resty"
```

Package resty HTTP and REST client library with parallel feature

## Index

- [Variables](<#variables>)
- [type Client](<#Client>)
- [type Handle](<#Handle>)
- [type Option](<#Option>)
  - [func WithClient\(c Client\) Option](<#WithClient>)
  - [func WithHeader\(header map\[string\]string\) Option](<#WithHeader>)
  - [func WithRequestInterceptor\(interceptor func\(req \*http.Request\) error\) Option](<#WithRequestInterceptor>)
  - [func WithRetry\(retry int\) Option](<#WithRetry>)
  - [func WithTransport\(transport \*http.Transport\) Option](<#WithTransport>)
- [type Resty](<#Resty>)
  - [func New\(opts ...Option\) \*Resty](<#New>)
  - [func \(r \*Resty\) Do\(ctx context.Context, method string, body io.Reader, urls ...string\) \*Resty](<#Resty.Do>)
  - [func \(r \*Resty\) DoDelete\(ctx context.Context, urls ...string\) \*Resty](<#Resty.DoDelete>)
  - [func \(r \*Resty\) DoGet\(ctx context.Context, urls ...string\) \*Resty](<#Resty.DoGet>)
  - [func \(r \*Resty\) DoPost\(ctx context.Context, body io.Reader, urls ...string\) \*Resty](<#Resty.DoPost>)
  - [func \(r \*Resty\) DoPut\(ctx context.Context, body io.Reader, urls ...string\) \*Resty](<#Resty.DoPut>)
  - [func \(r \*Resty\) First\(\) \[\]error](<#Resty.First>)
  - [func \(r \*Resty\) Then\(fn Handle\) \*Resty](<#Resty.Then>)
  - [func \(r \*Resty\) Wait\(\) \[\]error](<#Resty.Wait>)
- [type Result](<#Result>)


## Variables

<a name="DefaultDialTimeout"></a>

```go
var (
    // DefaultDialTimeout default timeout of a dialer
    DefaultDialTimeout = 5 * time.Second
    // DefaultRequestTimeout default time out of a http request
    DefaultRequestTimeout = 10 * time.Second
    // DefaultRetry retry times if a request is failed with 5xx status code
    DefaultRetry = 3
)
```

<a name="CreateClient"></a>CreateClient a function that create a client instance

```go
var CreateClient = func(t *http.Transport, timeout time.Duration) Client {
    client := &http.Client{
        Transport: t,
    }
    if timeout > 0 {
        client.Timeout = timeout
    }

    return client
}
```

<a name="DefaultHeader"></a>

```go
var DefaultHeader = make(map[string]string)
```

<a name="DefaultTransport"></a>Run the HTTP request in a goroutine and pass the response to f.

```go
var DefaultTransport = &http.Transport{
    Proxy:                 http.ProxyFromEnvironment,
    MaxIdleConns:          1000,
    IdleConnTimeout:       90 * time.Second,
    TLSHandshakeTimeout:   10 * time.Second,
    ExpectContinueTimeout: 1 * time.Second,
    MaxIdleConnsPerHost:   5,
    ForceAttemptHTTP2:     true,

    DialContext: (&net.Dialer{
        Timeout:   30 * time.Second,
        KeepAlive: 30 * time.Second,
        DualStack: true,
    }).DialContext,
}
```

<a name="Client"></a>
## type [Client](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L59-L61>)

Client http client

```go
type Client interface {
    Do(req *http.Request) (*http.Response, error)
}
```

<a name="Handle"></a>
## type [Handle](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L64>)

Handle handler of http response

```go
type Handle func(req *http.Request, resp *http.Response, respBody []byte, cf context.CancelFunc, err error) error
```

<a name="Option"></a>
## type [Option](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L67>)

Option set restry option

```go
type Option func(*Resty)
```

<a name="WithClient"></a>
### func [WithClient](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/option.go#L44>)

```go
func WithClient(c Client) Option
```

WithClient set client

<a name="WithHeader"></a>
### func [WithHeader](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/option.go#L17>)

```go
func WithHeader(header map[string]string) Option
```

WithHeader set header for http request

<a name="WithRequestInterceptor"></a>
### func [WithRequestInterceptor](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/option.go#L30>)

```go
func WithRequestInterceptor(interceptor func(req *http.Request) error) Option
```

WithRequestInterceptor intercept request

<a name="WithRetry"></a>
### func [WithRetry](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/option.go#L8>)

```go
func WithRetry(retry int) Option
```

WithRetry set retry times if request is failure with 5xx status code. retry is ingore if it is less than 1.

<a name="WithTransport"></a>
### func [WithTransport](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/option.go#L37>)

```go
func WithTransport(transport *http.Transport) Option
```

WithTransport set transport

<a name="Resty"></a>
## type [Resty](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L70-L84>)

Resty HTTP and REST client library with parallel feature

```go
type Resty struct {
    // contains filtered or unexported fields
}
```

<a name="New"></a>
### func [New](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L26>)

```go
func New(opts ...Option) *Resty
```

New create a Resty instance.

<a name="Resty.Do"></a>
### func \(\*Resty\) [Do](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L115>)

```go
func (r *Resty) Do(ctx context.Context, method string, body io.Reader, urls ...string) *Resty
```



<a name="Resty.DoDelete"></a>
### func \(\*Resty\) [DoDelete](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L111>)

```go
func (r *Resty) DoDelete(ctx context.Context, urls ...string) *Resty
```

DoDelete executes http requests with DELETE method in parallel

<a name="Resty.DoGet"></a>
### func \(\*Resty\) [DoGet](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L96>)

```go
func (r *Resty) DoGet(ctx context.Context, urls ...string) *Resty
```

DoGet executes http requests with GET method in parallel

<a name="Resty.DoPost"></a>
### func \(\*Resty\) [DoPost](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L101>)

```go
func (r *Resty) DoPost(ctx context.Context, body io.Reader, urls ...string) *Resty
```

DoPost executes http requests with POST method in parallel

<a name="Resty.DoPut"></a>
### func \(\*Resty\) [DoPut](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L106>)

```go
func (r *Resty) DoPut(ctx context.Context, body io.Reader, urls ...string) *Resty
```

DoPut executes http requests with PUT method in parallel

<a name="Resty.First"></a>
### func \(\*Resty\) [First](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L258>)

```go
func (r *Resty) First() []error
```

First successful result or errors

<a name="Resty.Then"></a>
### func \(\*Resty\) [Then](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L87>)

```go
func (r *Resty) Then(fn Handle) *Resty
```

Then is used to call the handle function when the request has completed processing

<a name="Resty.Wait"></a>
### func \(\*Resty\) [Wait](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/resty.go#L213>)

```go
func (r *Resty) Wait() []error
```

Wait waits for all the requests to be completed

<a name="Result"></a>
## type [Result](<https://github.com/0chain/gosdk/blob/doc/initial/core/resty/result.go#L6-L11>)

Result result of a http request

```go
type Result struct {
    Request      *http.Request
    Response     *http.Response
    ResponseBody []byte
    Err          error
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
