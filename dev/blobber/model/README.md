<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# model

```go
import "github.com/0chain/gosdk/dev/blobber/model"
```

## Index

- [Constants](<#constants>)
- [func GetListingFieldsMap\(refEntity interface\{\}, tagName string\) map\[string\]interface\{\}](<#GetListingFieldsMap>)
- [func GetReferenceLookup\(allocationID string, path string\) string](<#GetReferenceLookup>)
- [func GetSubDirsFromPath\(p string\) \[\]string](<#GetSubDirsFromPath>)
- [type CommitResult](<#CommitResult>)
- [type LatestPrevWriteMarker](<#LatestPrevWriteMarker>)
- [type Ref](<#Ref>)
  - [func \(r \*Ref\) CalculateDirHash\(ctx context.Context\) \(string, error\)](<#Ref.CalculateDirHash>)
  - [func \(fr \*Ref\) CalculateFileHash\(ctx context.Context\) \(string, error\)](<#Ref.CalculateFileHash>)
  - [func \(r \*Ref\) CalculateHash\(ctx context.Context\) \(string, error\)](<#Ref.CalculateHash>)
  - [func \(fr \*Ref\) GetFileHashData\(\) string](<#Ref.GetFileHashData>)
  - [func \(r \*Ref\) GetListingData\(ctx context.Context\) map\[string\]interface\{\}](<#Ref.GetListingData>)
- [type ReferencePath](<#ReferencePath>)
- [type ReferencePathResult](<#ReferencePathResult>)
  - [func BuildReferencePathResult\(rootRef \*Ref\) \*ReferencePathResult](<#BuildReferencePathResult>)
- [type UploadFormData](<#UploadFormData>)
- [type UploadResult](<#UploadResult>)
- [type WriteMarker](<#WriteMarker>)


## Constants

<a name="FILE"></a>

```go
const (
    FILE      = "f"
    DIRECTORY = "d"

    CHUNK_SIZE = 64 * 1024

    DIR_LIST_TAG  = "dirlist"
    FILE_LIST_TAG = "filelist"
)
```

<a name="GetListingFieldsMap"></a>
## func [GetListingFieldsMap](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L66>)

```go
func GetListingFieldsMap(refEntity interface{}, tagName string) map[string]interface{}
```



<a name="GetReferenceLookup"></a>
## func [GetReferenceLookup](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L146>)

```go
func GetReferenceLookup(allocationID string, path string) string
```

GetReferenceLookup hash\(allocationID \+ ":" \+ path\)

<a name="GetSubDirsFromPath"></a>
## func [GetSubDirsFromPath](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L101>)

```go
func GetSubDirsFromPath(p string) []string
```



<a name="CommitResult"></a>
## type [CommitResult](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/commit_result.go#L3-L10>)



```go
type CommitResult struct {
    AllocationRoot string       `json:"allocation_root"`
    WriteMarker    *WriteMarker `json:"write_marker"`
    Success        bool         `json:"success"`
    ErrorMessage   string       `json:"error_msg,omitempty"`
}
```

<a name="LatestPrevWriteMarker"></a>
## type [LatestPrevWriteMarker](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/write_marker.go#L19-L22>)



```go
type LatestPrevWriteMarker struct {
    LatestWM *marker.WriteMarker `json:"latest_write_marker"`
    PrevWM   *marker.WriteMarker `json:"prev_write_marker"`
}
```

<a name="Ref"></a>
## type [Ref](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L24-L45>)



```go
type Ref struct {
    Type            string `gorm:"column:type" dirlist:"type" filelist:"type"`
    AllocationID    string `gorm:"column:allocation_id"`
    LookupHash      string `gorm:"column:lookup_hash" dirlist:"lookup_hash" filelist:"lookup_hash"`
    Name            string `gorm:"column:name" dirlist:"name" filelist:"name"`
    Path            string `gorm:"column:path" dirlist:"path" filelist:"path"`
    Hash            string `gorm:"column:hash" dirlist:"hash" filelist:"hash"`
    NumBlocks       int64  `gorm:"column:num_of_blocks" dirlist:"num_of_blocks" filelist:"num_of_blocks"`
    PathHash        string `gorm:"column:path_hash" dirlist:"path_hash" filelist:"path_hash"`
    ParentPath      string `gorm:"column:parent_path"`
    PathLevel       int    `gorm:"column:level"`
    ValidationRoot  string `gorm:"column:validation_root" filelist:"validation_root"`
    Size            int64  `gorm:"column:size" dirlist:"size" filelist:"size"`
    FixedMerkleRoot string `gorm:"column:fixed_merkle_root" filelist:"fixed_merkle_root"`
    ActualFileSize  int64  `gorm:"column:actual_file_size" filelist:"actual_file_size"`
    ActualFileHash  string `gorm:"column:actual_file_hash" filelist:"actual_file_hash"`

    Children []*Ref `gorm:"-"`

    ChunkSize int64 `gorm:"column:chunk_size" dirlist:"chunk_size" filelist:"chunk_size"`
    // contains filtered or unexported fields
}
```

<a name="Ref.CalculateDirHash"></a>
### func \(\*Ref\) [CalculateDirHash](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L115>)

```go
func (r *Ref) CalculateDirHash(ctx context.Context) (string, error)
```



<a name="Ref.CalculateFileHash"></a>
### func \(\*Ref\) [CalculateFileHash](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L150>)

```go
func (fr *Ref) CalculateFileHash(ctx context.Context) (string, error)
```



<a name="Ref.CalculateHash"></a>
### func \(\*Ref\) [CalculateHash](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L47>)

```go
func (r *Ref) CalculateHash(ctx context.Context) (string, error)
```



<a name="Ref.GetFileHashData"></a>
### func \(\*Ref\) [GetFileHashData](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L160>)

```go
func (fr *Ref) GetFileHashData() string
```



<a name="Ref.GetListingData"></a>
### func \(\*Ref\) [GetListingData](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/ref.go#L55>)

```go
func (r *Ref) GetListingData(ctx context.Context) map[string]interface{}
```

GetListingData reflect and convert all fields into map\[string\]interface\{\}

<a name="ReferencePath"></a>
## type [ReferencePath](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/reference_path.go#L3-L7>)



```go
type ReferencePath struct {
    Meta map[string]interface{} `json:"meta_data"`
    List []*ReferencePath       `json:"list,omitempty"`
    Ref  *Ref
}
```

<a name="ReferencePathResult"></a>
## type [ReferencePathResult](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/reference_path_result.go#L5-L8>)



```go
type ReferencePathResult struct {
    *ReferencePath
    LatestWM *WriteMarker `json:"latest_write_marker"`
}
```

<a name="BuildReferencePathResult"></a>
### func [BuildReferencePathResult](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/reference_path_result.go#L10>)

```go
func BuildReferencePathResult(rootRef *Ref) *ReferencePathResult
```



<a name="UploadFormData"></a>
## type [UploadFormData](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/upload_form_data.go#L4-L38>)

UploadFormData form data of upload

```go
type UploadFormData struct {
    ConnectionID string `json:"connection_id,omitempty"`
    // Filename remote file name
    Filename string `json:"filename,omitempty"`
    // Path remote path
    Path string `json:"filepath,omitempty"`

    // ValidationRoot of shard data (encoded,encrypted) where leaf is sha256 hash of 64KB data
    ValidationRoot string `json:"validation_root,omitempty"`
    // Hash hash of shard thumbnail  (encoded,encrypted)
    ThumbnailContentHash string `json:"thumbnail_content_hash,omitempty"`

    // FixedMerkleRoot merkle root of shard data (encoded, encrypted)
    FixedMerkleRoot string `json:"fixed_merkle_root,omitempty"`

    // ActualHash hash of orignial file (unencoded, unencrypted)
    ActualHash string `json:"actual_hash,omitempty"`
    // ActualSize total bytes of  orignial file (unencoded, unencrypted)
    ActualSize int64 `json:"actual_size,omitempty"`
    // ActualThumbnailSize total bytes of orignial thumbnail (unencoded, unencrypted)
    ActualThumbSize int64 `json:"actual_thumb_size,omitempty"`
    // ActualThumbnailHash hash of orignial thumbnail (unencoded, unencrypted)
    ActualThumbHash string `json:"actual_thumb_hash,omitempty"`

    MimeType     string `json:"mimetype,omitempty"`
    CustomMeta   string `json:"custom_meta,omitempty"`
    EncryptedKey string `json:"encrypted_key,omitempty"`

    IsFinal      bool   `json:"is_final,omitempty"`      // current chunk is last or not
    ChunkHash    string `json:"chunk_hash"`              // hash of current chunk
    ChunkIndex   int    `json:"chunk_index,omitempty"`   // the seq of current chunk. all chunks MUST be uploaded one by one because of streaming merkle hash
    ChunkSize    int64  `json:"chunk_size,omitempty"`    // the size of a chunk. 64*1024 is default
    UploadOffset int64  `json:"upload_offset,omitempty"` // It is next position that new incoming chunk should be append to

}
```

<a name="UploadResult"></a>
## type [UploadResult](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/upload_result.go#L3-L8>)



```go
type UploadResult struct {
    Filename        string `json:"filename"`
    ShardSize       int64  `json:"size"`
    ValidationRoot  string `json:"validation_root,omitempty"`
    FixedMerkleRoot string `json:"fixed_merkle_root,omitempty"`
}
```

<a name="WriteMarker"></a>
## type [WriteMarker](<https://github.com/0chain/gosdk/blob/doc/initial/dev/blobber/model/write_marker.go#L8-L17>)



```go
type WriteMarker struct {
    AllocationRoot         string           `gorm:"column:allocation_root;primary_key" json:"allocation_root"`
    PreviousAllocationRoot string           `gorm:"column:prev_allocation_root" json:"prev_allocation_root"`
    AllocationID           string           `gorm:"column:allocation_id" json:"allocation_id"`
    Size                   int64            `gorm:"column:size" json:"size"`
    BlobberID              string           `gorm:"column:blobber_id" json:"blobber_id"`
    Timestamp              common.Timestamp `gorm:"column:timestamp" json:"timestamp"`
    ClientID               string           `gorm:"column:client_id" json:"client_id"`
    Signature              string           `gorm:"column:signature" json:"signature"`
}
```

Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
